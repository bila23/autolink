<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition  xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" template="./../template/noAdminTemplate.xhtml" xmlns:p="http://primefaces.org/ui" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
    <ui:define name="content">
        <h:form id="mf">
            <div class="row">
                <div class="col s12">
                    <p:growl globalOnly="true" id="msg" showDetail="true"/>
                    <p:tabView scrollable="true">
                        <p:ajax event="tabChange" listener="#{tallerSolController.onTabChange}" update="mf:msg dting dtanu dtdpp dteas dtcpd dtcpa"/>
                        <p:tab title="INGRESADAS" id="ing">
                            <p:dataTable emptyMessage="No hay solicitudes" id="dting" var="r1" value="#{tallerSolController.solList}" stickyHeader="true" stickyTopAt=".layout-topbar" reflow="true" rows="6" paginator="true">
                                <p:column headerText="Marca" sortBy="#{r1.marca}">
                                    <h:outputText value="#{r1.marca}" />
                                </p:column>
                                <p:column headerText="Anio" sortBy="#{r1.aniocarro}">
                                    <h:outputText value="#{r1.aniocarro}" />
                                </p:column>
                                <p:column headerText="Placa" sortBy="#{r1.placa}">
                                    <h:outputText value="#{r1.placa}" />
                                </p:column>
                                <p:column headerText="Siniestro" sortBy="#{r1.siniestro}">
                                    <h:outputText value="#{r1.siniestro}" />
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                        <p:tab title="ANULADAS" id="anu">
                            <p:dataTable emptyMessage="No hay solicitudes" id="dtanu" var="r1" value="#{tallerSolController.solList}" stickyHeader="true" stickyTopAt=".layout-topbar" reflow="true" rows="6" paginator="true">
                                <p:column headerText="Marca" sortBy="#{r1.marca}">
                                    <h:outputText value="#{r1.marca}" />
                                </p:column>
                                <p:column headerText="Anio" sortBy="#{r1.aniocarro}">
                                    <h:outputText value="#{r1.aniocarro}" />
                                </p:column>
                                <p:column headerText="Placa" sortBy="#{r1.placa}">
                                    <h:outputText value="#{r1.placa}" />
                                </p:column>
                                <p:column headerText="Siniestro" sortBy="#{r1.siniestro}">
                                    <h:outputText value="#{r1.siniestro}" />
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                        <p:tab title="DESP. POR PROVEEDOR" id="dpp">
                            <p:dataTable emptyMessage="No hay solicitudes" id="dtdpp" var="r1" value="#{tallerSolController.solList}" stickyHeader="true" stickyTopAt=".layout-topbar" reflow="true" rows="6" paginator="true">
                                <p:column headerText="Marca" sortBy="#{r1.marca}">
                                    <h:outputText value="#{r1.marca}" />
                                </p:column>
                                <p:column headerText="Anio" sortBy="#{r1.aniocarro}">
                                    <h:outputText value="#{r1.aniocarro}" />
                                </p:column>
                                <p:column headerText="Placa" sortBy="#{r1.placa}">
                                    <h:outputText value="#{r1.placa}" />
                                </p:column>
                                <p:column headerText="Siniestro" sortBy="#{r1.siniestro}">
                                    <h:outputText value="#{r1.siniestro}" />
                                </p:column>
                                <p:column headerText="">
                                    <p:commandButton value="Entreg. a sat." class="waves-effect waves-light btn" actionListener="#{tallerSolController.setCodeChange(r1.id)}" onsuccess="PF('dlgEsc').show()"/>
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                        <p:tab title="ENT. A SAT. CLIENTE" id="eas">
                            <p:dataTable emptyMessage="No hay solicitudes" id="dteas" var="r1" value="#{tallerSolController.solList}" stickyHeader="true" stickyTopAt=".layout-topbar" reflow="true" rows="6" paginator="true">
                                <p:column headerText="Marca" sortBy="#{r1.marca}">
                                    <h:outputText value="#{r1.marca}" />
                                </p:column>
                                <p:column headerText="Anio" sortBy="#{r1.aniocarro}">
                                    <h:outputText value="#{r1.aniocarro}" />
                                </p:column>
                                <p:column headerText="Placa" sortBy="#{r1.placa}">
                                    <h:outputText value="#{r1.placa}" />
                                </p:column>
                                <p:column headerText="Siniestro" sortBy="#{r1.siniestro}">
                                    <h:outputText value="#{r1.siniestro}" />
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                        <p:tab title="CERR. POR DESIERTA" id="cpd">
                            <p:dataTable emptyMessage="No hay solicitudes" id="dtcpd" var="r1" value="#{tallerSolController.solList}" stickyHeader="true" stickyTopAt=".layout-topbar" reflow="true" rows="6" paginator="true">
                                <p:column headerText="Marca" sortBy="#{r1.marca}">
                                    <h:outputText value="#{r1.marca}" />
                                </p:column>
                                <p:column headerText="Anio" sortBy="#{r1.aniocarro}">
                                    <h:outputText value="#{r1.aniocarro}" />
                                </p:column>
                                <p:column headerText="Placa" sortBy="#{r1.placa}">
                                    <h:outputText value="#{r1.placa}" />
                                </p:column>
                                <p:column headerText="Siniestro" sortBy="#{r1.siniestro}">
                                    <h:outputText value="#{r1.siniestro}" />
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                        <p:tab title="CERR. POR ASEG." id="cpa">
                            <p:dataTable emptyMessage="No hay solicitudes" id="dtcpa" var="r1" value="#{tallerSolController.solList}" stickyHeader="true" stickyTopAt=".layout-topbar" reflow="true" rows="6" paginator="true">
                                <p:column headerText="Marca" sortBy="#{r1.marca}">
                                    <h:outputText value="#{r1.marca}" />
                                </p:column>
                                <p:column headerText="Anio" sortBy="#{r1.aniocarro}">
                                    <h:outputText value="#{r1.aniocarro}" />
                                </p:column>
                                <p:column headerText="Placa" sortBy="#{r1.placa}">
                                    <h:outputText value="#{r1.placa}" />
                                </p:column>
                                <p:column headerText="Siniestro" sortBy="#{r1.siniestro}">
                                    <h:outputText value="#{r1.siniestro}" />
                                </p:column>
                            </p:dataTable>
                        </p:tab>
                    </p:tabView>
                </div>
            </div>
            <p:dialog widgetVar="dlgEsc" id="dlgEsc" modal="true" resizable="false" showHeader="false" closeOnEscape="true">
                <div class="form-group">
                    <div style="padding-bottom:25px">
                        Esta seguro que desea mover la solicitud al estado "Entregado a Satisfaccion del Cliente"?
                    </div>
                    <p:commandButton update="mf:msg mf" onsuccess="PF('dlgEsc').hide();" value="Si" class="waves-effect waves-light btn" actionListener="#{tallerSolController.despProvToEntSatis()}"/>
                    <p:spacer width="7"/>
                    <p:commandButton value="No" class="waves-effect waves-light btn" onclick="PF('dlgEsc').hide();" type="button"/>
                </div>
            </p:dialog>
        </h:form>
    </ui:define>
</ui:composition>